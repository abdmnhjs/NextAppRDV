generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id             Int            @id @default(autoincrement())
  username       String         @unique
  password       String
  role           String
  availabilities Availability[]
  consultantAppointments Appointment[] @relation("ConsultantAppointments")
  clientAppointments      Appointment[] @relation("ClientAppointments")
}

model Availability {
  id           Int    @id @default(autoincrement())
  consultantId Int
  startHour    Int
  startMinutes Int
  endHour      Int
  endMinutes   Int
  day          String
  booked       Boolean @default(false)
  consultant   User   @relation(fields: [consultantId], references: [id])
  appointments Appointment[]
}

model Appointment {
  id          Int    @id @default(autoincrement())
  consultantUsername String
  clientUsername String
  availabilityId Int
  consultant User @relation("ConsultantAppointments", fields: [consultantUsername], references: [username])
  client User @relation("ClientAppointments", fields: [clientUsername], references: [username])
  availability Availability @relation(fields: [availabilityId], references: [id])
}
